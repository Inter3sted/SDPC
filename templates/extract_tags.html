<!DOCTYPE html>
<html>
  <head>
    <title>Extract PNG Tags</title>
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        height: 100%;
      }

      body {
        display: flex;
        justify-content: center;
        align-items: center;
        background: linear-gradient(to bottom right, #f4f4f4, #dfe4ed);
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        border-radius: 20px;
        padding: 50px;
      }

      /* add any additional styles for your page elements here */
      .image-container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }

      .image-container img {
        max-width: 300px;
        max-height: 300px;
        margin: 20px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        border-radius: 10px;
      }

      .extracted-tags {
        margin-top: 20px;
      }

      .extracted-tags ul {
        list-style: none;
        margin: 0;
        padding: 0;
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
      }

      .extracted-tags li {
        margin: 5px;
        padding: 5px 10px;
        background: #fff;
        color: #333;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
      }
    </style>
  </head>
  <body>
    <h1>Extract PNG Tags</h1>
    <form
      method="POST"
      enctype="multipart/form-data"
      action="{{ url_for('extract_tags') }}"
    >
      <label for="file">Select a PNG file to upload:</label>
      <input
        type="file"
        name="file"
        accept=".png"
        onchange="previewImage(event)"
      /><br /><br />
      <div class="image-container">
        {% if uploaded_image_url %}
        <img
          id="preview"
          src="{{ uploaded_image_url }}"
          alt="Uploaded image"
          style="display: block; max-width: 500px"
        />
        {% else %}
        <img
          id="preview"
          src=""
          alt="No image uploaded"
          style="display: none; max-width: 500px"
        />
        {% endif %}
      </div>
      <label for="tag_extraction_ratio">Tag Extraction Ratio (0-1):</label>
      <input
        type="number"
        step="0.1"
        min="0"
        max="1"
        name="tag_extraction_ratio"
        value="0.5"
      /><br /><br />
      <input type="submit" value="Extract Tags" />
    </form>
    <div class="extracted-tags">
      {% if tags %}
      <h2>Extracted Tags:</h2>
      <ul>
        {% for tag in tags %}
        <li>{{ tag }}</li>
        {% endfor %}
      </ul>
      {% endif %}
    </div>

    <script>
      function previewImage(event) {
        var preview = document.getElementById("preview");
        var file = event.target.files[0];
        var reader = new FileReader();

        reader.onload = function () {
          preview.src = reader.result;
          preview.style.display = "block";
        };

        if (file) {
          reader.readAsDataURL(file);
        }
      }
    </script>
  </body>
</html>
